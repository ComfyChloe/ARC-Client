<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ARC-OSC Client</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <div class="sidebar-section">
                <h3>Connection Status</h3>
                <div class="connection-status">
                    <span class="status-indicator status-disconnected" id="server-status"></span>
                    <span id="server-status-text">Disconnected</span>
                </div>
                <div class="connection-status">
                    <span class="status-indicator status-disconnected" id="osc-status"></span>
                    <span id="osc-status-text">OSC Status: Off</span>
                </div>
                <button class="btn btn-primary" id="osc-toggle-btn" onclick="toggleOscServer()" style="width: 100%; margin-top: 10px;">Enable OSC</button>
            </div>
            <div class="sidebar-section navigation-section">
                <h3>Navigation</h3>
                <button class="btn btn-primary" id="nav-main" onclick="showMainView()" style="width: 100%; margin-bottom: 10px;">Main View</button>
                <button class="btn btn-primary" id="nav-osc" onclick="showOscView()" style="width: 100%; margin-bottom: 10px;">OSC</button>
                <div class="tree-item" style="margin-bottom: 10px;">
                    <button class="tree-toggle" id="nav-extras" style="text-align: center; width: 100%; justify-content: center; display: flex; align-items: center;">
                        <span class="arrow">â–¶</span>
                        <span style="margin: 0;">Extras</span>
                    </button>
                    <div class="tree-content">
                        <div class="tree-items">
                            <button class="tree-child" id="nav-Hyperate" onclick="showHyperateView()">Hyperate</button>
                            <button class="tree-child" id="nav-vosk" onclick="showVOSKView()">VOSK</button>
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" id="nav-logs" onclick="showLogsView()" style="width: 100%; margin-bottom: 10px;">Logs</button>
                <button class="btn btn-primary" id="nav-settings" onclick="showSettingsView()" style="width: 100%;">Settings</button>
            </div>
            <div class="sidebar-section" id="avatar-section" style="display: none;">
                <h3>Current Avatar</h3>
                <div class="avatar-info" id="avatar-info">
                    <div id="avatar-id">No avatar selected</div>
                    <div id="parameter-count">0 parameters</div>
                </div>
            </div>
            <div class="sidebar-section" id="auth-section">
                <h3>Authentication</h3>
                <div class="form-group">
                    <div style="margin-bottom: 5px; font-weight: bold; color: #ecf0f1;">Username</div>
                    <input type="text" id="username">
                </div>
                <div class="form-group">
                    <div style="margin-bottom: 5px; font-weight: bold; color: #ecf0f1;">Password</div>
                    <input type="password" id="password">
                </div>
                <button class="btn btn-success" onclick="authenticate()" id="auth-btn">Connect & Login</button>
            </div>
        </div>
        <div class="main-content view-transition" id="main-view">
            <div class="header">
                <h1>ARC-OSC Client</h1>
                <p>Real-time OSC communication with VRChat</p>
            </div>
            <div class="tabs">
                <button class="tab active" onclick="showTab('parameters')">Parameters</button>
            </div>
            
            <div id="parameters" class="tab-content active">
                <div class="card">
                    <h3>Avatar Parameters</h3>
                    <div class="parameter-list" id="parameter-list">
                        <p>Connect and authenticate to view parameters</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-content view-transition" id="settings-view" style="display: none;">
            <div class="header">
                <h1>Settings</h1>
                <p>Configure your ARC-OSC Client settings</p>
            </div>
            <div class="card">
                <h3>Server Configuration</h3>
                <div class="form-group">
                    <label for="server-url-settings">WebSocket Server URL</label>
                    <input type="text" id="server-url-settings" value="wss://localhost:3000">
                </div>
                <button class="btn btn-primary" onclick="updateConfigFromSettings()">Update Server Config</button>
            </div>
            <div class="card">
                <h3>Application Settings</h3>
                <div class="form-group">
                    <label for="auto-connect">Auto-connect on startup</label>
                    <select id="auto-connect">
                        <option value="false">Disabled</option>
                        <option value="true">Enabled</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="log-level">Log Level</label>
                    <select id="log-level">
                        <option value="info">Info</option>
                        <option value="warning">Warning</option>
                        <option value="error">Error</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="updateAppSettings()">Update Application Settings</button>
            </div>
        </div>
        <div class="main-content view-transition" id="vosk-view" style="display: none;">
            <div class="header">
                <h1>VOSK Voice Recognition</h1>
                <p>Coming soon - Voice recognition for Universal control</p>
            </div>
            <div class="card">
                <h3>Feature Not Available</h3>
                <p style="color: #666; text-align: center; padding: 20px;">
                    This feature is planned for development and will be available in the future.
                </p>
            </div>
        </div>

        <div class="main-content view-transition" id="Hyperate-view" style="display: none;">
            <div class="header">
                <h1>Hyperate intergration</h1>
                <p>Feature Not Available (yet)</p>
            </div>
            <div class="card">
                <h3>Feature Not Available</h3>
                <p style="color: #666; text-align: center; padding: 20px;">
                    This feature is currently in development and will be available in a future update.
                </p>
            </div>
        </div>

        <div class="main-content view-transition" id="logs-view" style="display: none;">
            <div class="header">
                <h1>Logs</h1>
                <p>View application logs and activity</p>
            </div>
            <div class="card">
                <h3>Activity Log</h3>
                <div class="log-container" id="log-container">
                    Welcome to ARC-OSC Client<br>
                    Configure your settings and connect to get started<br>
                </div>
                <button class="btn btn-primary" onclick="clearLogs()" style="margin-top: 10px;">Clear Logs</button>
            </div>
        </div>
        <div class="main-content view-transition" id="osc-view" style="display: none;">
            <div class="header">
                <h1>OSC Settings</h1>
                <p>Configure and test OSC communication</p>
            </div>
            <div class="card">
                <h3>Send OSC Message</h3>
                <div class="osc-sender">
                    <div class="form-group">
                        <label for="osc-address">Address</label>
                        <input type="text" id="osc-address" placeholder="/avatar/parameters/example">
                    </div>
                    <div class="form-group">
                        <label for="osc-value">Value</label>
                        <input type="text" id="osc-value" placeholder="1.0">
                    </div>
                    <div class="form-group">
                        <label for="osc-type">Type</label>
                        <select id="osc-type">
                            <option value="float">Float</option>
                            <option value="int">Int</option>
                            <option value="bool">Bool</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" onclick="sendOscMessage()">Send</button>
                </div>
            </div>
            <div class="card">
                <h3>OSC Configuration</h3>
                <div class="form-group">
                    <label for="local-port-settings">Primary Incoming OSC Port</label>
                    <input type="number" id="local-port-settings" value="9001" placeholder="Local OSC Port (Incoming)">
                </div>
                <div class="form-group">
                    <label for="target-port-settings">Primary Outgoing OSC Port</label>
                    <input type="number" id="target-port-settings" value="9000" placeholder="Target OSC Port (Outgoing)">
                </div>
                <div class="form-group">
                    <label for="target-address-settings">Local OSC IP Address</label>
                    <input type="text" id="target-address-settings" value="127.0.0.1">
                </div>
                <button class="btn btn-primary" onclick="updateOscPortsFromSettings()" style="margin-top: 15px;">Update Primary OSC Configuration</button>
            </div>

            <div class="card">
                <h3>Additional OSC Connections</h3>
                <p style="margin-bottom: 15px; color: #666; font-size: 0.9em;">
                    Configure additional OSC endpoints for advanced routing. Create separate incoming connections to receive OSC data from multiple sources, 
                    and outgoing connections to send data to multiple applications.
                </p>
                <div style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px; border: 1px solid #dee2e6;">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                        <div>
                            <button class="btn btn-success" onclick="addOscConnection('incoming')" id="add-incoming-btn" style="margin-right: 10px;">+ Add Incoming</button>
                            <button class="btn btn-success" onclick="addOscConnection('outgoing')" id="add-outgoing-btn" style="margin-right: 10px;">+ Add Outgoing</button>
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <span id="connection-count" style="color: #666; font-size: 0.9em;">0/20 additional connections</span>
                            <button class="btn btn-primary" onclick="updateAdditionalOscConnections()">Update Connections</button>
                        </div>
                    </div>
                </div>

                <div id="additional-osc-connections">
                    <!-- Dynamic connections -->
                </div>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>